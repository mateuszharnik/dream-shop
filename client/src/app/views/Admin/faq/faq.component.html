<div *ngIf="isLoading; else faqPageView" class="spinner-wrapper">
  <app-spinner></app-spinner>
</div>
<ng-template #faqPageView>
  <section class="admin-page-section p-6 min-vh-100">
    <header class="admin-page-section__header">
      <h2 class="h4 text-center mb-6">Najczęściej zadawane pytania</h2>
    </header>
    <article class="mt-6 text-center">
      <p class="mb-6">
        Tutaj możesz zarządzać najczęściej zadawanymi pytaniami. Dodawaj, usuwaj
        lub edytuj pytania.
      </p>
      <app-router-link
        [linkTitle]="'Dodaj nowe pytanie'"
        [linkClass]="'button button-success mb-6'"
        [linkRouter]="'dodaj'"
      >
        Dodaj pytanie
        <app-fa-icon [faClass]="'fas fa-plus ml-2'"></app-fa-icon>
      </app-router-link>
      <div class="admin-page-section__emails m-auto">
        <div class="mb-4" *ngFor="let faq of faqs">
          <h3 class="h5 mb-4">{{ faq.category | titlecase }}</h3>
          <app-list-item *ngFor="let question of faq.questions">
            <div class="w-100">
              <h4 class="p">{{ question.title }}</h4>
              <p>{{ question.content }}</p>
              <app-button
                [buttonTitle]="'Usuń pytanie'"
                [buttonClass]="'button button-danger button-small'"
                [buttonOnClick]="true"
                (whenButtonClick)="openModal(question)"
              >
                Usuń
              </app-button>
              <app-router-link
                [linkTitle]="'Przejdź do edycji pytania'"
                [linkClass]="'button button-primary button-small ml-4'"
                [linkRouter]="
                  '/admin/strony/najczesciej-zadawane-pytania/' + question.id
                "
              >
                Edytuj
              </app-router-link>
            </div>
          </app-list-item>
        </div>
      </div>
      <app-modal
        *ngIf="questionToDelete"
        (whenButtonClick)="!isDisabled && closeModal()"
      >
        <p>
          <strong>
            Czy napewno chcesz usunąć pytanie: "{{ questionToDelete.title }}" z
            sekcji FAQ&nbsp;?
          </strong>
        </p>
        <app-form
          [formClass]="'form text-left inline-block'"
          [formName]="form"
          (whenFormSubmit)="submit()"
        >
          <app-button
            [buttonType]="'submit'"
            [buttonTitle]="computedButtonTitle()"
            [buttonClass]="'button button-danger'"
            [buttonDisabled]="isDisabled"
            #deleteButton
          >
            {{ computedButtonText() }}
            <app-fa-icon
              *ngIf="isDisabled"
              [faClass]="'fas fa-spinner fa-spin'"
            ></app-fa-icon>
          </app-button>
        </app-form>
      </app-modal>
    </article>
  </section>
</ng-template>
