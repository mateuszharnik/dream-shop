<div *ngIf="isLoading; else newsletterPageView" class="spinner-wrapper">
  <app-spinner></app-spinner>
</div>
<ng-template #newsletterPageView>
  <section class="admin-page-section relative p-6 min-vh-100">
    <header class="admin-page-section__header">
      <h2 class="h4 text-center mb-6">Newsletter</h2>
    </header>
    <article class="mt-6 text-center">
      <p>
        Tutaj znajdują się adresy email osób zapisanych na newsletter.
      </p>
      <div class="admin-page-section__emails m-auto">
        <app-list-item *ngFor="let email of emails">
          <span class="truncate">
            {{ email.email }}
          </span>
          <app-button
            [buttonTitle]="'Usuń email'"
            [buttonClass]="'button button-danger button-small ml-4'"
            [buttonOnClick]="true"
            (whenButtonClick)="openModal(email)"
          >
            Usuń
          </app-button>
        </app-list-item>
      </div>
      <app-modal
        *ngIf="emailToDelete"
        (whenButtonClick)="!isDisabled && closeModal()"
      >
        <p>Czy napewno chcesz usunąć email {{ emailToDelete.email }}&nbsp;?</p>
        <app-form
          [formClass]="'form text-left inline-block'"
          [formName]="form"
          (whenFormSubmit)="submit()"
        >
          <app-button
            [buttonType]="'submit'"
            [buttonTitle]="computedButtonTitle()"
            [buttonClass]="'button button-danger'"
            [buttonDisabled]="isDisabled"
            #deleteButton
          >
            {{ computedButtonText() }}
            <app-fa-icon
              *ngIf="isDisabled"
              [faClass]="'fas fa-spinner fa-spin'"
            ></app-fa-icon>
          </app-button>
        </app-form>
      </app-modal>
    </article>
  </section>
</ng-template>
